<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Level 8: Neptune</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js" integrity="sha512-uaz5GpnQoE6t5echKlX8P52czvsIGgLPcvlzfvRubLZ1Hp8JemUDnbUiAahbVtPb+jUVrNETuXvAhDDF/N3M4w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/addons/p5.sound.js" integrity="sha512-TU9AWtV5uUZPX8dbBAH8NQF1tSdigPRRT82vllAQ1Ke28puiqLA6ZVKxtUGlgrH6yWFnkKy+sE6luNEGH9ar0A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans&display=swap" rel="stylesheet">


    <!-- CSS -->
    <style>
        body {
            margin: 0px;
            padding: 0px;
            background-image: url("Neptune Game Pixel Space Background.png");
            overflow: hidden;
        }

    </style>


</head>
<body>
    
    <script> 
        w = window.innerWidth
        h = window.innerHeight


        // ---


        // Sounds
        // BG Music
        let bgMusic

        // Jumping sound var
        let jumpSound

        // Jumping sound tracker
        let jumpSoundT = 0

        // Character's values
        let astronautPlayer

        // Character's X and Y position
        var cX = (0)
        var cY = (0.755 * h)
    
        // Character's width & height
        var cW = (0.035 * w)
        var cH = (0.075 * h)


        // ---  


        // Tracker to see how much times they press a NPC (To prevent the user from creating multiple dialogue boxes by clicking the NPC multiple times)
        let trackNeptuneNPC = 0 

        // Trackers for Platform NPCS 
        // Tracker for Platform #1
        let pT1 = 0 
        let pT2 = 0 
        let pT3 = 0 
        let pT4 = 0
        let pT5 = 0 
        let pT6 = 0 

        // Tracker for last NPC
        // If they press the 6th NPC, then the this NPC will appear on the last platform. 
        let pT = 0 


        // NPCs 
        // Note: The NPC they talk to will spawn in the platform corresponding with their number -> ex. NPC #1 will spawn the first platform 

        // NPC #1
        let NeptuneNPC1 
        
        // X and Y position
        var NX1 = (1/11 * w)
        var NY1 = (0.755 * h)
        
        // Width & height 
        var NW1 = (0.035 * w)
        var NH1 = (0.075 * h)

        // NPC #2
        let NeptuneNPC2 
        
        // X and Y position
        var NX2 = (1/4.5 * w)
        var NY2 = (0.755 * h)
        
        // Width & height 
        var NW2 = (0.035 * w)
        var NH2 = (0.075 * h)

        // NPC #3
        let NeptuneNPC3 
        
        // X and Y position
        var NX3 = (1/2.65 * w)
        var NY3 = (0.755 * h)
        
        // Width & height 
        var NW3 = (0.035 * w)
        var NH3 = (0.075 * h)

        // NPC #4
        let NeptuneNPC4
        
        // X and Y position
        var NX4 = (1/1.9 * w)
        var NY4 = (0.755 * h)
        
        // Width & height 
        var NW4 = (0.035 * w)
        var NH4 = (0.075 * h)

        // NPC #5
        let NeptuneNPC5
        
        // X and Y position
        var NX5 = (1/1.5 * w)
        var NY5 = (0.755 * h)
        
        // Width & height 
        var NW5 = (0.035 * w)
        var NH5 = (0.075 * h)

        // NPC #6
        let NeptuneNPC6
        
        // X and Y position
        var NX6 = (1/1.225 * w)
        var NY6 = (0.755 * h)
        
        // Width & height 
        var NW6 = (0.035 * w)
        var NH6 = (0.075 * h)

        // Last NPC on the platform
        let NeptuneNPC
        
        // X and Y position
        var NX = (1/1.12 * w)
        var NY = (0.2385 * h)
        
        // Width & height 
        var NW = (0.035 * w)
        var NH = (0.075 * h)
        

        // ---
        

        // Gravity Value

        // If we're jumping or not
        var jump = false
        // Gravity
        var gravityValue = 0.9
        // Velocity/Player Speed
        var velocity = 5
        // How high you want to jump
        var lift = -12.5
        // Falling speed
        var fallSpeed = 5


        // ---
        

        // Track jumps
        var jumpTracker = 0 


        // ---


        // Settings value
        var settingsTracker = 0


        // ---



        // PLATFORM VALUES

        // Ground rectangle (starting platform)
        var sPX = 0
        var sPY = (0.83 * h)
        var sPW = (w)
        var sPH = (0.17 * h)

        // Platform 1 
        var p1X = (1/15 * w)
        var p1Y = (0.715 * h)
        var p1W = (0.1 * w)
        var p1H = (0.017 * h)

        // Platform 2 
        var p2X = (1/4.5 * w)
        var p2Y = (0.635 * h)
        var p2W = (0.1 * w)
        var p2H = (0.017 * h)

        // Platform 3
        var p3X = (1/2.65 * w)
        var p3Y = (0.555 * h)
        var p3W = (0.1 * w)
        var p3H = (0.017 * h)

        // Platform 4
        var p4X = (1/1.9 * w)
        var p4Y = (0.475 * h)
        var p4W = (0.1 * w)
        var p4H = (0.017 * h)

        // Platform 5
        var p5X = (1/1.5 * w)
        var p5Y = (0.395 * h)
        var p5W = (0.1 * w)
        var p5H = (0.017 * h)

        // Platform 6 (Containing NPC)
        var p6X = (1/1.225 * w)
        var p6Y = (0.315 * h)
        var p6W = (0.1 * w)
        var p6H = (0.017 * h)        



        // ---

        // Preload images
        function preload() {
            // Astronaut Player
            rightAstronautPlayer = loadImage('Player Astronaut.png')
            leftAstronautPlayer = loadImage('Walking Left Player Astronaut.png')

            // Uranus Astronaut NPC
            // NPC #1 
            NeptuneNPC1 = loadImage('Right Neptune Astronaut (NPC).png')

            // NPC #2 
            NeptuneNPC2 = loadImage('Right Neptune Astronaut (NPC).png')

            // NPC #3
            NeptuneNPC3 = loadImage('Right Neptune Astronaut (NPC).png')

            // NPC #4
            NeptuneNPC4 = loadImage('Right Neptune Astronaut (NPC).png')

            // NPC #5
            NeptuneNPC5 = loadImage('Right Neptune Astronaut (NPC).png')

            // NPC #6
            NeptuneNPC6 = loadImage('Right Neptune Astronaut (NPC).png')

            // Last NPC
            NeptuneNPC = loadImage('Right Neptune Astronaut (NPC).png')

            // Sounds
            // BG Sound
            bgMusic = loadSound('Level8Music.mp3')

            // Jumping sound
            jumpSound = loadSound('JumpSound.mp3')
        }


        function gravity() {
            // Stop the character from falling down when it's at the ground and if they're not jumping
            if (cY + cH >= sPY && jump == false) {
                cY = cY
                // Reset the jump tracker when they hit the ground
                jumpTracker = 0
            }
            // Make the character fall down if it's not on the ground 
            else {
                cY = cY + (gravityValue * velocity)
            }
            // If the character pressed spacebar/jumped
            if (jump == true) {
                // Prevent the player from jumping above the screen
                if (cY <= 0 || jumpTracker >= -lift) {
                    // Stop the player from going below the ground when they're holding spacebar (GLITCH)
                    if (cY + cH >= sPY) {
                        cY = cY
                        velocity = 0
                    }
                    else {
                        velocity = fallSpeed 
                    }
                }
                // Allow the player to jump
                else {
                    velocity = lift
                    // Add 1 to the jump tracker
                    jumpTracker += 1
                }
            } 
            else {
                velocity = fallSpeed
            }
            // Prevent the character from leaving the screen
            if (cX <= 0) {
                cX = 0
            }
            if (cX + cW >= w) {
                cX = w - cW
            }
        }   

        function jumpUp() {
            if (keyIsDown(32)) {
                // If they press spacebar then change the jump value from false to true
                jump = true

                // If the tracker of the jumping sound is 0, then play the sound.
                if (jumpSoundT == 0) {
                    // Play the jumping sound 
                    // soundVar.play([Starting time],[Playback speed], [Volume], [Cue to start], [Duration])
                    jumpSound.play(0, 1, 1, 0, 1)

                    // Add 1 to the jump sound tracker
                    jumpSoundT += 1
                }
            }
            // Set jump to false if they're not jumping 
            else {
                // Set the jump sound tracker back to 0 so the sound can play again when they jump 
                jumpSoundT = 0
                jump = false
            }
        }

        function moveLeft() {
            // Move left when they press "a"
            if (keyIsDown(65)) {
                cX -= 5
            }
        }

        function moveRight() {
            // Move right when they press "d"
            if (keyIsDown(68)) {
                cX += 5
            }
        }
        

        function setup() {
            createCanvas(w,h)

            // Play the background music 
            bgMusic.play()

            // Loop the music
            bgMusic.loop()

            // Set the volume
            bgMusic.setVolume(0.55)
        }
        

        // ---


        // Ground/Platforms 


        // Ground
        function startingPlatform() {
            fill('rgba(0, 97, 245, 1)')
            rect(sPX,sPY,sPW,sPH)
        }

        // Platform #1
        function platform1() {
            // If they didn't click the corresponding NPC, then the platform is transparent
            if (pT1 == 0) {
                fill('rgba(0, 97, 245, 0)')
                rect(p1X,p1Y,p1W,p1H)
            }
            // If they click the corresponding NPC, make the platform appear
            else if (pT1 == 1) {
                fill('rgba(0, 97, 245, 1)')
                rect(p1X,p1Y,p1W,p1H)
            }
        }

        // Platform #2
        function platform2() {
            // If they didn't click the corresponding NPC, then the platform is transparent
            if (pT2 == 0) {
                fill('rgba(0, 97, 245, 0)')
                rect(p2X,p2Y,p2W,p2H)
            }
            // If they click the corresponding NPC, make the platform appear
            else if (pT2 == 1) {
                fill('rgba(0, 97, 245, 1)')
                rect(p2X,p2Y,p2W,p2H)
            }
        }

        // Platform #3
        function platform3() {
            // If they didn't click the corresponding NPC, then the platform is transparent
            if (pT3 == 0) {
                fill('rgba(0, 97, 245, 0)')
                rect(p3X,p3Y,p3W,p3H)
            }
            // If they click the corresponding NPC, make the platform appear
            else if (pT3 == 1) {
                fill('rgba(0, 97, 245, 1)')
                rect(p3X,p3Y,p3W,p3H)
            }
        }

        // Platform #4
        function platform4() {
            // If they didn't click the corresponding NPC, then the platform is transparent
            if (pT4 == 0) {
                fill('rgba(0, 97, 245, 0)')
                rect(p4X,p4Y,p4W,p4H)
            }
            // If they click the corresponding NPC, make the platform appear
            else if (pT4 == 1) {
                fill('rgba(0, 97, 245, 1)')
                rect(p4X,p4Y,p4W,p4H)
            }
        }

        // Platform #5
        function platform5() {
            // If they didn't click the corresponding NPC, then the platform is transparent
            if (pT5 == 0) {
                fill('rgba(0, 97, 245, 0)')
                rect(p5X,p5Y,p5W,p5H)
            }
            // If they click the corresponding NPC, make the platform appear
            else if (pT5 == 1) {
                fill('rgba(0, 97, 245, 1)')
                rect(p5X,p5Y,p5W,p5H)
            }
        }

        // Platform #6 (Containing NPC)
        function platform6() {
            // If they didn't click the corresponding NPC, then the platform is transparent
            if (pT6 == 0) {
                fill('rgba(0, 97, 245, 0)')
                rect(p6X,p6Y,p6W,p6H)
            }
            // If they click the corresponding NPC, make the platform appear
            else if (pT6 == 1) {
                fill('rgba(0, 97, 245, 1)')
                rect(p6X,p6Y,p6W,p6H)
            }
        }


        // ---


        function draw() {
            clear() 
            // Gravity
            jumpUp()
            gravity()

            // Moving left/right
            moveLeft()
            moveRight()

            // Player
            // Make the player face the other way when they're walking to the left. 

            // If they're walking left then make the astronaut face to the left. 
            if (keyIsDown(65)) {
                image(leftAstronautPlayer,cX,cY,cW,cH)
            }
            
            // If they're not walking to the left
            else {
                image(rightAstronautPlayer,cX,cY,cW,cH)
            }
            noStroke()
            fill('rgba(0,0,0,0)')
            rect(cX,cY,cW,cH)

            // Ground/starting platform
            startingPlatform()

            // NPC 1
            // Clicking this NPC will spawn in the first platform
            image(NeptuneNPC1,NX1,NY1,NW1,NH1)

            // Create dialogue if their mouse is on the NPC and they pressed it 
            // if ((mouse position is on NPC) AND (character is on the ground))
            if ( ( ((NX1 <= mouseX) && (NX1 + NW1 >= mouseX)) && ((NY1 <= mouseY) && (NY1 + NH1 >= mouseY)) && mouseIsPressed === true ) && ( (sPX <= cX + cW) && (cX - cW <= sPX + sPW - cW) && (cY + cH >= sPY) && (cY + cH <= sPY + sPH) && jump == false && trackNeptuneNPC == 0 )) {
                noLoop()

                // Reset mouseIsPressed to false, because if it's kept true then the if statement will run even if their mouse is hovering the NPC (AFTER THEY PRESSED IT ONCE)
                mouseIsPressed = false

                // Add 1 to the tracker so they can't click it multiple times
                trackNeptuneNPC += 1

                // Create DIV for dialogue box
                let cDDiv = createDiv()
                
                // Location of DIV
                cDDiv.position(0.25 * w, 0.25 * h)

                // DIV size
                cDDiv.size(0.5 * w, 0.5 * h)

                // Style the DIV
                cDDiv.style('background-color','black')
                cDDiv.style('border-radius','10px')
                
                // Create the dialogue text
                let cDText = createP('Hey there astronaut! Do you want me to build the 1st platform for you?')

                // Style the text
                cDText.style('font-family','Pixelify Sans')
                cDText.style('color','white')
                cDText.style('font-size','24px')
                cDText.id('cDText')

                // Make the DIV the parent of the text (p)
                cDText.parent(cDDiv)
                
                // Create a button to close the dialogue 
                let tPYButton = createButton('Yes')

                // Make the button run a function when they click it
                tPYButton.mouseClicked(buildPlatform)
                tPYButton.size(0.0275 * w, 0.035 * h)
                tPYButton.position(0.445 * w, 0.467 * h)

                tPYButton.style('background-color','lightgreen') 
                tPYButton.style('color','darkgreen') 
                tPYButton.style('font-size','24px')
                tPYButton.style('font-family','Pixelify Sans')
                tPYButton.style('border-radius','10px')

                tPYButton.parent(cDDiv)

                // Function to build the 1st platform
                function buildPlatform() {
                    cDDiv.remove()

                    // Set the tracker for the 1st platform to 1 
                    pT1 = 1

                    // Set the tracker of seeing how much times the player clicked one of the NPC to 0 so they click on a NPC again
                    trackNeptuneNPC = 0

                    loop()
                }

                // Create a button to close the dialogue 
                let tPNButton = createButton('No')

                // Make the button run a function when they click it
                tPNButton.mouseClicked(cTPage)
                tPNButton.size(0.0275 * w, 0.035 * h)
                tPNButton.position(0.4725 * w, 0.467 * h)

                tPNButton.style('background-color','red') 
                tPNButton.style('color','darkred') 
                tPNButton.style('font-size','24px')
                tPNButton.style('font-family','Pixelify Sans')
                tPNButton.style('border-radius','10px')

                tPNButton.parent(cDDiv)

                // Function to close the dialogoue 
                function cTPage() {
                    cDDiv.remove()
                    trackNeptuneNPC = 0
                    loop()
                }
            }


            // Platform 1
            platform1() 

            // Prevent the player from falling down if they're on the platform.
            // This means: if the player's X coordinates is greater than or equal to the platform's left side (edge) AND less than or equal to the platform's right side (edge) AND the player's Y coordinates is greater than or equal to the platform's top then stop the player from falling through the platform.
            if ((p1X <= cX + cW) && (cX - cW <= p1X + p1W - cW) && (cY + cH >= p1Y) && (cY + cH <= p1Y + p1H) && jump == false && pT1 == 1) {
                // Make the character stay at the same height when they land on the platform
                cY = cY
                // Stop them from falling down
                velocity = 0
                // Reset jump tracker to let them jump when they land on the platform
                jumpTracker = 0
            }       

            // NPC 2
            // Clicking this NPC will spawn in the first platform
            image(NeptuneNPC2,NX2,NY2,NW2,NH2)

            // Create dialogue if their mouse is on the NPC and they pressed it 
            // if ((mouse position is on NPC) AND (character is on the ground))
            if ( ( ((NX2 <= mouseX) && (NX2 + NW2 >= mouseX)) && ((NY2 <= mouseY) && (NY2 + NH2 >= mouseY)) && mouseIsPressed === true ) && ( (sPX <= cX + cW) && (cX - cW <= sPX + sPW - cW) && (cY + cH >= sPY) && (cY + cH <= sPY + sPH) && jump == false && trackNeptuneNPC == 0 )) {
                noLoop()

                // Reset mouseIsPressed to false, because if it's kept true then the if statement will run even if their mouse is hovering the NPC (AFTER THEY PRESSED IT ONCE)
                mouseIsPressed = false

                // Add 1 to the tracker so they can't click it multiple times
                trackNeptuneNPC += 1

                // Create DIV for dialogue box
                let cDDiv = createDiv()
                
                // Location of DIV
                cDDiv.position(0.25 * w, 0.25 * h)

                // DIV size
                cDDiv.size(0.5 * w, 0.5 * h)

                // Style the DIV
                cDDiv.style('background-color','black')
                cDDiv.style('border-radius','10px')
                
                // Create the dialogue text
                let cDText = createP('Hey there astronaut! Do you want me to build the 2nd platform for you?')

                // Style the text
                cDText.style('font-family','Pixelify Sans')
                cDText.style('color','white')
                cDText.style('font-size','24px')
                cDText.id('cDText')

                // Make the DIV the parent of the text (p)
                cDText.parent(cDDiv)
                
                // Create a button to close the dialogue 
                let tPYButton = createButton('Yes')

                // Make the button run a function when they click it
                tPYButton.mouseClicked(buildPlatform)
                tPYButton.size(0.0275 * w, 0.035 * h)
                tPYButton.position(0.445 * w, 0.467 * h)

                tPYButton.style('background-color','lightgreen') 
                tPYButton.style('color','darkgreen') 
                tPYButton.style('font-size','24px')
                tPYButton.style('font-family','Pixelify Sans')
                tPYButton.style('border-radius','10px')

                tPYButton.parent(cDDiv)

                // Function to build the 2nd platform
                function buildPlatform() {
                    cDDiv.remove()

                    // Set the tracker for the 2nd platform to 1 so the it appears
                    pT2 = 1

                    // Set the tracker of seeing how much times the player clicked one of the NPC to 0 so they click on a NPC again
                    trackNeptuneNPC = 0

                    loop()
                }

                // Create a button to close the dialogue 
                let tPNButton = createButton('No')

                // Make the button run a function when they click it
                tPNButton.mouseClicked(cTPage)
                tPNButton.size(0.0275 * w, 0.035 * h)
                tPNButton.position(0.4725 * w, 0.467 * h)

                tPNButton.style('background-color','red') 
                tPNButton.style('color','darkred') 
                tPNButton.style('font-size','24px')
                tPNButton.style('font-family','Pixelify Sans')
                tPNButton.style('border-radius','10px')

                tPNButton.parent(cDDiv)

                // Function to close the dialogoue 
                function cTPage() {
                    cDDiv.remove()
                    trackNeptuneNPC = 0
                    loop()
                }
            }

            // Platform 2
            platform2() 
            
            // Prevent the player from falling down if they're on the platform.
            if ((p2X <= cX + cW) && (cX - cW <= p2X + p2W - cW) && (cY + cH >= p2Y) && (cY + cH <= p2Y + p2H) && jump == false && pT2 == 1) {
                // Make the character stay at the same height when they land on the platform
                cY = cY
                // Stop them from falling down
                velocity = 0
                // Reset jump tracker to let them jump when they land on the platform
                jumpTracker = 0
            }   

            // NPC 3
            // Clicking this NPC will spawn in the first platform
            image(NeptuneNPC3,NX3,NY3,NW3,NH3)

            // Create dialogue if their mouse is on the NPC and they pressed it 
            // if ((mouse position is on NPC) AND (character is on the ground))
            if ( ( ((NX3 <= mouseX) && (NX3 + NW3 >= mouseX)) && ((NY3 <= mouseY) && (NY3 + NH3 >= mouseY)) && mouseIsPressed === true ) && ( (sPX <= cX + cW) && (cX - cW <= sPX + sPW - cW) && (cY + cH >= sPY) && (cY + cH <= sPY + sPH) && jump == false && trackNeptuneNPC == 0 )) {
                noLoop()

                // Reset mouseIsPressed to false, because if it's kept true then the if statement will run even if their mouse is hovering the NPC (AFTER THEY PRESSED IT ONCE)
                mouseIsPressed = false

                // Add 1 to the tracker so they can't click it multiple times
                trackNeptuneNPC += 1

                // Create DIV for dialogue box
                let cDDiv = createDiv()
                
                // Location of DIV
                cDDiv.position(0.25 * w, 0.25 * h)

                // DIV size
                cDDiv.size(0.5 * w, 0.5 * h)

                // Style the DIV
                cDDiv.style('background-color','black')
                cDDiv.style('border-radius','10px')
                
                // Create the dialogue text
                let cDText = createP('Hey there astronaut! Do you want me to build the 3rd platform for you?')

                // Style the text
                cDText.style('font-family','Pixelify Sans')
                cDText.style('color','white')
                cDText.style('font-size','24px')
                cDText.id('cDText')

                // Make the DIV the parent of the text (p)
                cDText.parent(cDDiv)
                
                // Create a button to close the dialogue 
                let tPYButton = createButton('Yes')

                // Make the button run a function when they click it
                tPYButton.mouseClicked(buildPlatform)
                tPYButton.size(0.0275 * w, 0.035 * h)
                tPYButton.position(0.445 * w, 0.467 * h)

                tPYButton.style('background-color','lightgreen') 
                tPYButton.style('color','darkgreen') 
                tPYButton.style('font-size','24px')
                tPYButton.style('font-family','Pixelify Sans')
                tPYButton.style('border-radius','10px')

                tPYButton.parent(cDDiv)

                // Function to build the 3rd platform
                function buildPlatform() {
                    cDDiv.remove()

                    // Set the tracker for the 3rd platform to 1 so the it appears
                    pT3 = 1

                    // Set the tracker of seeing how much times the player clicked one of the NPC to 0 so they click on a NPC again
                    trackNeptuneNPC = 0

                    loop()
                }

                // Create a button to close the dialogue 
                let tPNButton = createButton('No')

                // Make the button run a function when they click it
                tPNButton.mouseClicked(cTPage)
                tPNButton.size(0.0275 * w, 0.035 * h)
                tPNButton.position(0.4725 * w, 0.467 * h)

                tPNButton.style('background-color','red') 
                tPNButton.style('color','darkred') 
                tPNButton.style('font-size','24px')
                tPNButton.style('font-family','Pixelify Sans')
                tPNButton.style('border-radius','10px')

                tPNButton.parent(cDDiv)

                // Function to close the dialogoue 
                function cTPage() {
                    cDDiv.remove()
                    trackNeptuneNPC = 0
                    loop()
                }
            }

            // Platform 3
            platform3() 
            
            // Prevent the player from falling down if they're on the platform.
            if ((p3X <= cX + cW) && (cX - cW <= p3X + p3W - cW) && (cY + cH >= p3Y) && (cY + cH <= p3Y + p3H) && jump == false && pT3 == 1) {
                // Make the character stay at the same height when they land on the platform
                cY = cY
                // Stop them from falling down
                velocity = 0
                // Reset jump tracker to let them jump when they land on the platform
                jumpTracker = 0
            }   

            // NPC 4
            // Clicking this NPC will spawn in the first platform
            image(NeptuneNPC4,NX4,NY4,NW4,NH4)

            // Create dialogue if their mouse is on the NPC and they pressed it 
            // if ((mouse position is on NPC) AND (character is on the ground))
            if ( ( ((NX4 <= mouseX) && (NX4 + NW4 >= mouseX)) && ((NY4 <= mouseY) && (NY4 + NH4 >= mouseY)) && mouseIsPressed === true ) && ( (sPX <= cX + cW) && (cX - cW <= sPX + sPW - cW) && (cY + cH >= sPY) && (cY + cH <= sPY + sPH) && jump == false && trackNeptuneNPC == 0 )) {
                noLoop()

                // Reset mouseIsPressed to false, because if it's kept true then the if statement will run even if their mouse is hovering the NPC (AFTER THEY PRESSED IT ONCE)
                mouseIsPressed = false

                // Add 1 to the tracker so they can't click it multiple times
                trackNeptuneNPC += 1

                // Create DIV for dialogue box
                let cDDiv = createDiv()
                
                // Location of DIV
                cDDiv.position(0.25 * w, 0.25 * h)

                // DIV size
                cDDiv.size(0.5 * w, 0.5 * h)

                // Style the DIV
                cDDiv.style('background-color','black')
                cDDiv.style('border-radius','10px')
                
                // Create the dialogue text
                let cDText = createP('Hey there astronaut! Do you want me to build the 4th platform for you?')

                // Style the text
                cDText.style('font-family','Pixelify Sans')
                cDText.style('color','white')
                cDText.style('font-size','24px')
                cDText.id('cDText')

                // Make the DIV the parent of the text (p)
                cDText.parent(cDDiv)
                
                // Create a button to close the dialogue 
                let tPYButton = createButton('Yes')

                // Make the button run a function when they click it
                tPYButton.mouseClicked(buildPlatform)
                tPYButton.size(0.0275 * w, 0.035 * h)
                tPYButton.position(0.445 * w, 0.467 * h)

                tPYButton.style('background-color','lightgreen') 
                tPYButton.style('color','darkgreen') 
                tPYButton.style('font-size','24px')
                tPYButton.style('font-family','Pixelify Sans')
                tPYButton.style('border-radius','10px')

                tPYButton.parent(cDDiv)

                // Function to build the 4th platform
                function buildPlatform() {
                    cDDiv.remove()

                    // Set the tracker for the 4th platform to 1 so the it appears
                    pT4 = 1

                    // Set the tracker of seeing how much times the player clicked one of the NPC to 0 so they click on a NPC again
                    trackNeptuneNPC = 0

                    loop()
                }

                // Create a button to close the dialogue 
                let tPNButton = createButton('No')

                // Make the button run a function when they click it
                tPNButton.mouseClicked(cTPage)
                tPNButton.size(0.0275 * w, 0.035 * h)
                tPNButton.position(0.4725 * w, 0.467 * h)

                tPNButton.style('background-color','red') 
                tPNButton.style('color','darkred') 
                tPNButton.style('font-size','24px')
                tPNButton.style('font-family','Pixelify Sans')
                tPNButton.style('border-radius','10px')

                tPNButton.parent(cDDiv)

                // Function to close the dialogoue 
                function cTPage() {
                    cDDiv.remove()
                    trackNeptuneNPC = 0
                    loop()
                }
            }

            //  Platform 4
            platform4()

            // Prevent the player from falling down if they're on the platform.
            if ((p4X <= cX + cW) && (cX - cW <= p4X + p4W - cW) && (cY + cH >= p4Y) && (cY + cH <= p4Y + p4H) && jump == false && pT4 == 1) {
                // Make the character stay at the same height when they land on the platform
                cY = cY
                // Stop them from falling down
                velocity = 0
                // Reset jump tracker to let them jump when they land on the platform
                jumpTracker = 0
            }   

            // NPC 5
            // Clicking this NPC will spawn in the first platform
            image(NeptuneNPC5,NX5,NY5,NW5,NH5)

            // Create dialogue if their mouse is on the NPC and they pressed it 
            // if ((mouse position is on NPC) AND (character is on the ground))
            if ( ( ((NX5 <= mouseX) && (NX5 + NW5 >= mouseX)) && ((NY5 <= mouseY) && (NY5 + NH5 >= mouseY)) && mouseIsPressed === true ) && ( (sPX <= cX + cW) && (cX - cW <= sPX + sPW - cW) && (cY + cH >= sPY) && (cY + cH <= sPY + sPH) && jump == false && trackNeptuneNPC == 0 )) {
                noLoop()

                // Reset mouseIsPressed to false, because if it's kept true then the if statement will run even if their mouse is hovering the NPC (AFTER THEY PRESSED IT ONCE)
                mouseIsPressed = false

                // Add 1 to the tracker so they can't click it multiple times
                trackNeptuneNPC += 1

                // Create DIV for dialogue box
                let cDDiv = createDiv()
                
                // Location of DIV
                cDDiv.position(0.25 * w, 0.25 * h)

                // DIV size
                cDDiv.size(0.5 * w, 0.5 * h)

                // Style the DIV
                cDDiv.style('background-color','black')
                cDDiv.style('border-radius','10px')
                
                // Create the dialogue text
                let cDText = createP('Hey there astronaut! Do you want me to build the 5th platform for you?')

                // Style the text
                cDText.style('font-family','Pixelify Sans')
                cDText.style('color','white')
                cDText.style('font-size','24px')
                cDText.id('cDText')

                // Make the DIV the parent of the text (p)
                cDText.parent(cDDiv)
                
                // Create a button to close the dialogue 
                let tPYButton = createButton('Yes')

                // Make the button run a function when they click it
                tPYButton.mouseClicked(buildPlatform)
                tPYButton.size(0.0275 * w, 0.035 * h)
                tPYButton.position(0.445 * w, 0.467 * h)

                tPYButton.style('background-color','lightgreen') 
                tPYButton.style('color','darkgreen') 
                tPYButton.style('font-size','24px')
                tPYButton.style('font-family','Pixelify Sans')
                tPYButton.style('border-radius','10px')

                tPYButton.parent(cDDiv)

                // Function to build the 5th platform
                function buildPlatform() {
                    cDDiv.remove()

                    // Set the tracker for the 5th platform to 1 so the it appears
                    pT5 = 1

                    // Set the tracker of seeing how much times the player clicked one of the NPC to 0 so they click on a NPC again
                    trackNeptuneNPC = 0

                    loop()
                }

                // Create a button to close the dialogue 
                let tPNButton = createButton('No')

                // Make the button run a function when they click it
                tPNButton.mouseClicked(cTPage)
                tPNButton.size(0.0275 * w, 0.035 * h)
                tPNButton.position(0.4725 * w, 0.467 * h)

                tPNButton.style('background-color','red') 
                tPNButton.style('color','darkred') 
                tPNButton.style('font-size','24px')
                tPNButton.style('font-family','Pixelify Sans')
                tPNButton.style('border-radius','10px')

                tPNButton.parent(cDDiv)

                // Function to close the dialogoue 
                function cTPage() {
                    cDDiv.remove()
                    trackNeptuneNPC = 0
                    loop()
                }
            }

            // Platform 5
            platform5()

            // Prevent the player from falling down if they're on the platform.
            if ((p5X <= cX + cW) && (cX - cW <= p5X + p5W - cW) && (cY + cH >= p5Y) && (cY + cH <= p5Y + p5H) && jump == false && pT5 == 1) {
                // Make the character stay at the same height when they land on the platform
                cY = cY
                // Stop them from falling down
                velocity = 0
                // Reset jump tracker to let them jump when they land on the platform
                jumpTracker = 0
            }     

            // NPC 6
            // Clicking this NPC will spawn in the first platform
            image(NeptuneNPC6,NX6,NY6,NW6,NH6)

            // Create dialogue if their mouse is on the NPC and they pressed it 
            // if ((mouse position is on NPC) AND (character is on the ground))
            if ( ( ((NX6 <= mouseX) && (NX6 + NW6 >= mouseX)) && ((NY6 <= mouseY) && (NY6 + NH6 >= mouseY)) && mouseIsPressed === true ) && ( (sPX <= cX + cW) && (cX - cW <= sPX + sPW - cW) && (cY + cH >= sPY) && (cY + cH <= sPY + sPH) && jump == false && trackNeptuneNPC == 0 )) {
                noLoop()

                // Reset mouseIsPressed to false, because if it's kept true then the if statement will run even if their mouse is hovering the NPC (AFTER THEY PRESSED IT ONCE)
                mouseIsPressed = false

                // Add 1 to the tracker so they can't click it multiple times
                trackNeptuneNPC += 1

                // Create DIV for dialogue box
                let cDDiv = createDiv()
                
                // Location of DIV
                cDDiv.position(0.25 * w, 0.25 * h)

                // DIV size
                cDDiv.size(0.5 * w, 0.5 * h)

                // Style the DIV
                cDDiv.style('background-color','black')
                cDDiv.style('border-radius','10px')
                
                // Create the dialogue text
                let cDText = createP('Hey there astronaut! Do you want me to build the 6th platform for you?')

                // Style the text
                cDText.style('font-family','Pixelify Sans')
                cDText.style('color','white')
                cDText.style('font-size','24px')
                cDText.id('cDText')

                // Make the DIV the parent of the text (p)
                cDText.parent(cDDiv)
                
                // Create a button to close the dialogue 
                let tPYButton = createButton('Yes')

                // Make the button run a function when they click it
                tPYButton.mouseClicked(buildPlatform)
                tPYButton.size(0.0275 * w, 0.035 * h)
                tPYButton.position(0.445 * w, 0.467 * h)

                tPYButton.style('background-color','lightgreen') 
                tPYButton.style('color','darkgreen') 
                tPYButton.style('font-size','24px')
                tPYButton.style('font-family','Pixelify Sans')
                tPYButton.style('border-radius','10px')

                tPYButton.parent(cDDiv)

                // Function to build the 6th platform and make the last NPC appear on the platform
                function buildPlatform() {
                    cDDiv.remove()

                    // Set the tracker for the 6th platform to 1 so the it appears
                    pT6 = 1

                    // Set the tracker for the last NPC so it appears on the 6th platform 
                    pT = 1

                    // Set the tracker of seeing how much times the player clicked one of the NPC to 0 so they click on a NPC again
                    trackNeptuneNPC = 0

                    loop()
                }

                // Create a button to close the dialogue 
                let tPNButton = createButton('No')

                // Make the button run a function when they click it
                tPNButton.mouseClicked(cTPage)
                tPNButton.size(0.0275 * w, 0.035 * h)
                tPNButton.position(0.4725 * w, 0.467 * h)

                tPNButton.style('background-color','red') 
                tPNButton.style('color','darkred') 
                tPNButton.style('font-size','24px')
                tPNButton.style('font-family','Pixelify Sans')
                tPNButton.style('border-radius','10px')

                tPNButton.parent(cDDiv)

                // Function to close the dialogoue 
                function cTPage() {
                    cDDiv.remove()
                    trackNeptuneNPC = 0
                    loop()
                }
            }

            // If they pressed the 6th NPC
            if (pT == 1) {
                // Make the last NPC appear on the platform 
                // Clicking this NPC will allow them to complete the level
                image(NeptuneNPC,NX,NY,NW,NH)

                // Create dialogue if their mouse is on the NPC and they pressed it 
                // if ((mouse position is on NPC) AND (character is on the platform the NPC is on))
                if ( ( ((NX <= mouseX) && (NX + NW >= mouseX)) && ((NY <= mouseY) && (NY + NH >= mouseY)) && mouseIsPressed === true ) && ( (p6X <= cX + cW) && (cX - cW <= p6X + p6W - cW) && (cY + cH >= p6Y) && (cY + cH <= p6Y + p6H) && jump == false )) {
                    noLoop()

                    // Reset mouseIsPressed to false, because if it's kept true then the if statement will run even if their mouse is hovering the NPC (AFTER THEY PRESSED IT ONCE)
                    mouseIsPressed = false

                    // Add 1 to the tracker so they can't click it multiple times
                    trackNeptuneNPC += 1

                    // Create DIV for dialogue box
                    let cDDiv = createDiv()
                    
                    // Location of DIV
                    cDDiv.position(0.25 * w, 0.25 * h)

                    // DIV size
                    cDDiv.size(0.5 * w, 0.5 * h)

                    // Style the DIV
                    cDDiv.style('background-color','black')
                    cDDiv.style('border-radius','10px')
                    
                    // Create the dialogue text
                    let cDText = createP('Hey there astronaut! You have found the correct NPC. Do you want me to send you back so you can compelete the next level? (Press Yes to continue or No to stay)')

                    // Style the text
                    cDText.style('font-family','Pixelify Sans')
                    cDText.style('color','white')
                    cDText.style('font-size','24px')
                    cDText.id('cDText')

                    // Make the DIV the parent of the text (p)
                    cDText.parent(cDDiv)
                    
                    // Create a button to close the dialogue 
                    let tPYButton = createButton('Yes')

                    // Make the button run a function when they click it
                    tPYButton.mouseClicked(transferPage)
                    tPYButton.size(0.0275 * w, 0.035 * h)
                    tPYButton.position(0.445 * w, 0.467 * h)

                    tPYButton.style('background-color','lightgreen') 
                    tPYButton.style('color','darkgreen') 
                    tPYButton.style('font-size','24px')
                    tPYButton.style('font-family','Pixelify Sans')
                    tPYButton.style('border-radius','10px')

                    tPYButton.parent(cDDiv)

                    // Function to transfer to the levels page
                    function transferPage() {
                        // Set a variable to true to show that the player has completed the level
                        localStorage.setItem('l8Completion','true')
                        // Send them back to the levels page
                        location.href = "LevelsPage.html"
                    }

                    // Create a button to close the dialogue 
                    let tPNButton = createButton('No')

                    // Make the button run a function when they click it
                    tPNButton.mouseClicked(cTPage)
                    tPNButton.size(0.0275 * w, 0.035 * h)
                    tPNButton.position(0.4725 * w, 0.467 * h)

                    tPNButton.style('background-color','red') 
                    tPNButton.style('color','darkred') 
                    tPNButton.style('font-size','24px')
                    tPNButton.style('font-family','Pixelify Sans')
                    tPNButton.style('border-radius','10px')

                    tPNButton.parent(cDDiv)

                    // Function to close the dialogoue 
                    function cTPage() {
                        cDDiv.remove()
                        trackNeptuneNPC = 0
                        loop()
                    }
                }
            }

            // Platform 6 (Containing NPC)
            platform6()

            // Prevent the player from falling down if they're on the platform.
            if ((p6X <= cX + cW) && (cX - cW <= p6X + p6W - cW) && (cY + cH >= p6Y) && (cY + cH <= p6Y + p6H) && jump == false && pT6 == 1) {
                // Make the character stay at the same height when they land on the platform
                cY = cY
                // Stop them from falling down
                velocity = 0
                // Reset jump tracker to let them jump when they land on the platform
                jumpTracker = 0
            }     


            // ---

            
            // Create a settings menu for them to leave to the main menu 
            // Only create the button if the tracker is equal to 0 so it only creates it ONE time and not infinitely  
            if (settingsTracker == 0) {
                // Add one to the tracker to stop it from creating multiple buttons
                settingsTracker += 1

                // Create the button
                let settingsButton = createButton('⚙')
                settingsButton.position(0.955 * w, 0.935 * h)
                settingsButton.size(0.035 * w, 0.0475 * h)

                // Make the button run a function when they click it 
                settingsButton.mouseClicked(settingsMenu)

                // Style the button
                settingsButton.style('background-color','rgb(0, 120, 202)')
                settingsButton.style('border-color','rgb(0, 120, 202)')
                settingsButton.style('color','white')
                settingsButton.style('font-weight','bold')
                settingsButton.style('font-size','32px')
                settingsButton.style('border-radius','50%')

                // Function to open the settings menu
                function settingsMenu() {
                    noLoop()
                    // Create the button only one time
                    if (settingsTracker == 1) {
                        settingsTracker += 1

                        // Create the resume button
                        let settingsResumeB = createButton('Resume')
                        settingsResumeB.position(0.4875 * w, 0.325 * h)
                        settingsResumeB.size(0.1 * w, 0.05 * h)

                        settingsResumeB.mouseClicked(settingsResume)

                        settingsResumeB.style('background-color','rgb(0, 120, 202)')
                        settingsResumeB.style('border-color','rgb(0, 120, 202)')
                        settingsResumeB.style('color','white')
                        settingsResumeB.style('font-weight','bold')
                        settingsResumeB.style('font-size','20px')
                        settingsResumeB.style('border-radius','10px')


                        function settingsResume() {
                            // Reset the settings tracker
                            settingsTracker = 0
                            
                            // Remove the resume button & the exit button
                            settingsResumeB.remove()
                            settingsExitB.remove()

                            // Continue the loop 
                            loop()
                        }

                        // Create the exit button
                        let settingsExitB = createButton('Go Back to Levels Page (Warning: Progress will not save!)')
                        settingsExitB.position(0.45 * w, 0.425 * h)
                        settingsExitB.size(0.181 * w, 0.05 * h)

                        settingsExitB.mouseClicked(settingsExit)

                        settingsExitB.style('background-color','rgb(0, 120, 202)')
                        settingsExitB.style('border-color','rgb(0, 120, 202)')
                        settingsExitB.style('color','white')
                        settingsExitB.style('font-weight','bold')
                        settingsExitB.style('font-size','20px')
                        settingsExitB.style('border-radius','10px')

                        // Send them to the levels page
                        function settingsExit() {
                            location.href = 'LevelsPage.html'
                        }
                    }

                    else {

                    }
                } // Close the if statement for the settings menu
            } 

            else {

            }   // Else statement for settings

        }

    </script>
</body>
</html>